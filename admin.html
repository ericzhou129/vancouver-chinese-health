<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç®¡ç†åå° - æ¸©å“¥ååäººåŒ»ç–—äº’åŠ©</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Noto Sans SC', system-ui, sans-serif;
            background: #f5f5f5;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 30px;
        }
        
        h1 {
            color: #1e3a8a;
            margin-bottom: 30px;
            font-size: 2rem;
        }
        
        .section {
            margin-bottom: 40px;
            padding: 20px;
            background: #f8fafc;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
        }
        
        h2 {
            color: #2c5aa0;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            color: #374151;
            font-weight: 500;
        }
        
        input[type="text"],
        input[type="url"],
        textarea,
        select {
            width: 100%;
            padding: 10px 15px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 16px;
            font-family: inherit;
        }
        
        textarea {
            min-height: 150px;
            resize: vertical;
        }
        
        button {
            background: #059669;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        button:hover {
            background: #047857;
        }
        
        button:disabled {
            background: #9ca3af;
            cursor: not-allowed;
        }
        
        .button-secondary {
            background: #6b7280;
            margin-left: 10px;
        }
        
        .button-secondary:hover {
            background: #4b5563;
        }
        
        .article-list {
            margin-top: 20px;
        }
        
        .article-item {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 6px;
            border: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .article-info h3 {
            color: #1e3a8a;
            margin-bottom: 5px;
            font-size: 1.1rem;
        }
        
        .article-meta {
            color: #6b7280;
            font-size: 0.9rem;
        }
        
        .article-actions button {
            padding: 6px 15px;
            font-size: 14px;
            margin-left: 5px;
        }
        
        .qr-section {
            text-align: center;
        }
        
        .qr-preview {
            margin: 20px 0;
        }
        
        .qr-preview img {
            max-width: 200px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
        }
        
        #file-input {
            margin: 20px 0;
        }
        
        .alert {
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 6px;
        }
        
        .alert-success {
            background: #d1fae5;
            color: #065f46;
            border: 1px solid #a7f3d0;
        }
        
        .alert-info {
            background: #dbeafe;
            color: #1e3a8a;
            border: 1px solid #93c5fd;
        }
        
        .code-output {
            background: #1f2937;
            color: #e5e7eb;
            padding: 20px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            white-space: pre-wrap;
            margin-top: 20px;
        }
        
        .tabs {
            display: flex;
            border-bottom: 2px solid #e5e7eb;
            margin-bottom: 20px;
        }
        
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            background: none;
            border: none;
            font-size: 16px;
            color: #6b7280;
            transition: all 0.3s;
        }
        
        .tab.active {
            color: #1e3a8a;
            border-bottom: 2px solid #1e3a8a;
            margin-bottom: -2px;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .preview-container {
            border: 1px solid #e5e7eb;
            border-radius: 6px;
            padding: 20px;
            margin-top: 20px;
            background: white;
        }
        
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ ç®¡ç†åå° - æ¸©å“¥ååäººåŒ»ç–—äº’åŠ©</h1>
        
        <div class="alert alert-info">
            <strong>æç¤ºï¼š</strong>æ­¤é¡µé¢ç”¨äºç®¡ç†ç½‘ç«™å†…å®¹ã€‚ä¿®æ”¹åéœ€è¦æ‰‹åŠ¨æ›´æ–°ç›¸å…³æ–‡ä»¶åˆ°GitHubä»“åº“ã€‚
        </div>
        
        <div class="tabs">
            <button class="tab active" onclick="showTab('articles')">ğŸ“ æ–‡ç« ç®¡ç†</button>
            <button class="tab" onclick="showTab('qrcode')">ğŸ“± äºŒç»´ç ç®¡ç†</button>
            <button class="tab" onclick="showTab('settings')">âš™ï¸ ç½‘ç«™è®¾ç½®</button>
        </div>
        
        <!-- Articles Tab -->
        <div id="articles-tab" class="tab-content active">
            <div class="section">
                <h2>æ–°å¢æ–‡ç« </h2>
                <form id="article-form">
                    <div class="form-group">
                        <label for="article-id">æ–‡ç« ID (ç”¨äºURLï¼Œåªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œæ¨ªçº¿)</label>
                        <input type="text" id="article-id" placeholder="ä¾‹å¦‚ï¼šhealthcare-guide" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="article-title">æ–‡ç« æ ‡é¢˜ï¼ˆä¸­æ–‡ï¼‰</label>
                        <input type="text" id="article-title" placeholder="ä¾‹å¦‚ï¼šæ¸©å“¥ååäººçœ‹ç—…å®Œå…¨æŒ‡å—" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="article-title-en">æ–‡ç« æ ‡é¢˜ï¼ˆè‹±æ–‡ï¼‰</label>
                        <input type="text" id="article-title-en" placeholder="ä¾‹å¦‚ï¼šComplete Guide to Vancouver Chinese Healthcare">
                    </div>
                    
                    <div class="form-group">
                        <label for="article-description">æ–‡ç« æè¿°ï¼ˆä¸­æ–‡ï¼Œç”¨äºç¤¾äº¤åª’ä½“åˆ†äº«é¢„è§ˆï¼‰</label>
                        <textarea id="article-description" placeholder="ç®€çŸ­æè¿°æ–‡ç« å†…å®¹ï¼Œå»ºè®®50-150å­—" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="article-content">æ–‡ç« å†…å®¹ï¼ˆHTMLæ ¼å¼ï¼‰</label>
                        <textarea id="article-content" style="min-height: 300px;" placeholder="å°†æ–‡ç« HTMLå†…å®¹ç²˜è´´åœ¨è¿™é‡Œ..." required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="article-category">åˆ†ç±»</label>
                        <select id="article-category">
                            <option value="åŒ»ç–—å¯¼èˆª">åŒ»ç–—å¯¼èˆª</option>
                            <option value="ä¿é™©æŒ‡å—">ä¿é™©æŒ‡å—</option>
                            <option value="ç¤¾åŒºç»éªŒ">ç¤¾åŒºç»éªŒ</option>
                            <option value="å¥åº·èµ„è®¯">å¥åº·èµ„è®¯</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="article-tags">æ ‡ç­¾ï¼ˆç”¨é€—å·åˆ†éš”ï¼‰</label>
                        <input type="text" id="article-tags" placeholder="ä¾‹å¦‚ï¼šå®¶åº­åŒ»ç”Ÿ,æ€¥è¯Š,MSP">
                    </div>
                    
                    <button type="submit">ç”Ÿæˆæ–‡ç« é¡µé¢</button>
                    <button type="button" class="button-secondary" onclick="previewArticle()">é¢„è§ˆæ–‡ç« </button>
                </form>
                
                <div id="article-output" class="code-output hidden"></div>
                <div id="article-preview" class="preview-container hidden"></div>
            </div>
            
            <div class="section">
                <h2>ç°æœ‰æ–‡ç« </h2>
                <div class="article-list">
                    <div class="article-item">
                        <div class="article-info">
                            <h3>æ¸©å“¥ååäººçœ‹ç—…å®Œå…¨æŒ‡å—</h3>
                            <div class="article-meta">
                                ID: healthcare-guide | åˆ†ç±»ï¼šåŒ»ç–—å¯¼èˆª | å‘å¸ƒï¼š2025-01-01
                            </div>
                        </div>
                        <div class="article-actions">
                            <button onclick="editArticle('healthcare-guide')">ç¼–è¾‘</button>
                            <button onclick="viewArticle('healthcare-guide')">æŸ¥çœ‹</button>
                        </div>
                    </div>
                    <div class="article-item">
                        <div class="article-info">
                            <h3>MSPåŒ»ä¿è¯¦è§£ï¼šåäººæœ€å…³å¿ƒçš„20ä¸ªé—®é¢˜</h3>
                            <div class="article-meta">
                                ID: msp-insurance-guide | åˆ†ç±»ï¼šä¿é™©æŒ‡å— | å‘å¸ƒï¼š2025-01-02
                            </div>
                        </div>
                        <div class="article-actions">
                            <button onclick="editArticle('msp-insurance-guide')">ç¼–è¾‘</button>
                            <button onclick="viewArticle('msp-insurance-guide')">æŸ¥çœ‹</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- QR Code Tab -->
        <div id="qrcode-tab" class="tab-content">
            <div class="section qr-section">
                <h2>æ›´æ–°å¾®ä¿¡ç¾¤äºŒç»´ç </h2>
                <div class="qr-preview">
                    <img id="current-qr" src="wechat-qr-code.jpg" alt="å½“å‰äºŒç»´ç ">
                    <p>å½“å‰äºŒç»´ç </p>
                </div>
                
                <div class="form-group">
                    <label for="qr-upload">ä¸Šä¼ æ–°çš„äºŒç»´ç å›¾ç‰‡</label>
                    <input type="file" id="qr-upload" accept="image/*">
                </div>
                
                <div id="new-qr-preview" class="qr-preview hidden">
                    <img id="new-qr" alt="æ–°äºŒç»´ç é¢„è§ˆ">
                    <p>æ–°äºŒç»´ç é¢„è§ˆ</p>
                </div>
                
                <button onclick="updateQRCode()" disabled id="update-qr-btn">æ›´æ–°äºŒç»´ç </button>
                
                <div class="alert alert-info" style="margin-top: 20px;">
                    <strong>æ“ä½œè¯´æ˜ï¼š</strong>
                    <ol style="margin-left: 20px; margin-top: 10px;">
                        <li>ä¸Šä¼ æ–°çš„äºŒç»´ç å›¾ç‰‡</li>
                        <li>é¢„è§ˆç¡®è®¤æ— è¯¯åç‚¹å‡»"æ›´æ–°äºŒç»´ç "</li>
                        <li>å°†ç”Ÿæˆçš„æ–‡ä»¶å‘½åä¸º wechat-qr-code.jpg</li>
                        <li>ä¸Šä¼ åˆ°GitHubä»“åº“æ ¹ç›®å½•æ›¿æ¢åŸæ–‡ä»¶</li>
                    </ol>
                </div>
            </div>
        </div>
        
        <!-- Settings Tab -->
        <div id="settings-tab" class="tab-content">
            <div class="section">
                <h2>ç½‘ç«™åŸºæœ¬ä¿¡æ¯</h2>
                <form id="settings-form">
                    <div class="form-group">
                        <label for="site-name">ç½‘ç«™åç§°ï¼ˆä¸­æ–‡ï¼‰</label>
                        <input type="text" id="site-name" value="æ¸©å“¥ååäººåŒ»ç–—äº’åŠ©">
                    </div>
                    
                    <div class="form-group">
                        <label for="site-name-en">ç½‘ç«™åç§°ï¼ˆè‹±æ–‡ï¼‰</label>
                        <input type="text" id="site-name-en" value="Vancouver Chinese Healthcare Community">
                    </div>
                    
                    <div class="form-group">
                        <label for="site-description">ç½‘ç«™æè¿°</label>
                        <textarea id="site-description">æ¸©å“¥ååäººåŒ»ç–—äº’åŠ©ç¤¾åŒºï¼Œæä¾›ä¸­æ–‡å°±åŒ»æŒ‡å—ã€MSPä¿é™©è§£è¯»ã€æ‰¾åŒ»ç”Ÿæ”»ç•¥ã€‚</textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="site-url">ç½‘ç«™URL</label>
                        <input type="url" id="site-url" value="https://anxinhealth.vercel.app">
                    </div>
                    
                    <button type="submit">æ›´æ–°è®¾ç½®</button>
                </form>
            </div>
        </div>
    </div>
    
    <script>
        // Tab switching
        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabName + '-tab').classList.add('active');
            event.target.classList.add('active');
        }
        
        // Article form submission
        document.getElementById('article-form').addEventListener('submit', function(e) {
            e.preventDefault();
            generateArticlePage();
        });
        
        function generateArticlePage() {
            const id = document.getElementById('article-id').value;
            const title = document.getElementById('article-title').value;
            const titleEn = document.getElementById('article-title-en').value;
            const description = document.getElementById('article-description').value;
            const content = document.getElementById('article-content').value;
            const category = document.getElementById('article-category').value;
            const tags = document.getElementById('article-tags').value;
            
            // Generate the HTML for the article page
            const articleHTML = `<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${title}</title>
    <meta name="description" content="${description}">
    <meta name="keywords" content="${tags}">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://anxinhealth.vercel.app/${id}">
    <meta property="og:title" content="${title}">
    <meta property="og:description" content="${description}">
    <meta property="og:image" content="https://anxinhealth.vercel.app/assets/images/${id}-og.jpg">
    <meta property="og:site_name" content="æ¸©å“¥ååäººåŒ»ç–—äº’åŠ©">
    <meta property="og:locale" content="zh_CN">
    <meta property="article:published_time" content="${new Date().toISOString()}">
    <meta property="article:author" content="æ¸©å“¥åå®‰å¿ƒåŒ»ç–—">
    <meta property="article:section" content="${category}">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://anxinhealth.vercel.app/${id}">
    <meta property="twitter:title" content="${title}">
    <meta property="twitter:description" content="${description}">
    <meta property="twitter:image" content="https://anxinhealth.vercel.app/assets/images/${id}-og.jpg">
    
    <!-- Redirect to main page with hash -->
    <meta http-equiv="refresh" content="0; url=/#${id}">
    <script>
        window.location.replace('/#${id}');
    </script>
</head>
<body>
    <h1>${title}</h1>
    <p>${description}</p>
    <p>æ­£åœ¨è·³è½¬åˆ°æ–‡ç« é¡µé¢...</p>
    <p>å¦‚æœæ²¡æœ‰è‡ªåŠ¨è·³è½¬ï¼Œè¯·<a href="/#${id}">ç‚¹å‡»è¿™é‡Œ</a></p>
</body>
</html>`;
            
            // Show the output
            const output = document.getElementById('article-output');
            output.textContent = articleHTML;
            output.classList.remove('hidden');
            
            // Also generate the article data for articles.json
            const articleData = {
                id: id,
                title: title,
                titleEn: titleEn,
                description: description,
                category: category,
                tags: tags.split(',').map(t => t.trim()),
                publishDate: new Date().toISOString().split('T')[0]
            };
            
            alert('æ–‡ç« é¡µé¢å·²ç”Ÿæˆï¼è¯·å¤åˆ¶ä¸‹æ–¹ä»£ç å¹¶ä¿å­˜ä¸º ' + id + '.html æ–‡ä»¶');
        }
        
        function previewArticle() {
            const title = document.getElementById('article-title').value;
            const content = document.getElementById('article-content').value;
            
            const preview = document.getElementById('article-preview');
            preview.innerHTML = `
                <h2>${title}</h2>
                <div style="margin-top: 20px;">
                    ${content}
                </div>
            `;
            preview.classList.remove('hidden');
        }
        
        // QR Code upload handling
        document.getElementById('qr-upload').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('new-qr').src = e.target.result;
                    document.getElementById('new-qr-preview').classList.remove('hidden');
                    document.getElementById('update-qr-btn').disabled = false;
                };
                reader.readAsDataURL(file);
            }
        });
        
        function updateQRCode() {
            alert('è¯·å°†æ–°çš„äºŒç»´ç å›¾ç‰‡ä¿å­˜ä¸º wechat-qr-code.jpg å¹¶ä¸Šä¼ åˆ°GitHubä»“åº“');
        }
        
        function editArticle(id) {
            alert('ç¼–è¾‘åŠŸèƒ½å¼€å‘ä¸­...\nè¯·ç›´æ¥åœ¨ index.html ä¸­ä¿®æ”¹æ–‡ç« å†…å®¹');
        }
        
        function viewArticle(id) {
            window.open('/#' + id, '_blank');
        }
        
        // Settings form
        document.getElementById('settings-form').addEventListener('submit', function(e) {
            e.preventDefault();
            alert('è®¾ç½®å·²ä¿å­˜ï¼è¯·æ›´æ–° data/articles.json æ–‡ä»¶ä¸­çš„ç›¸åº”å†…å®¹');
        });
    </script>
</body>
</html>